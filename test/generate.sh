#!/bin/bash

SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"
TESTSUITE_DIR=$SCRIPT_DIR/testsuite
GENERATED_DIR=$SCRIPT_DIR/testsuite-generated
WAST2JSON_CMD="/Users/klltkr/wabt/build/wast2json" # FIXME: temporary custom build of wabt for https://github.com/WebAssembly/wabt/pull/1932

pushd $GENERATED_DIR

$WAST2JSON_CMD --version > $GENERATED_DIR/wast2json.version

$WAST2JSON_CMD $TESTSUITE_DIR/address.wast
$WAST2JSON_CMD $TESTSUITE_DIR/align.wast
$WAST2JSON_CMD $TESTSUITE_DIR/binary-leb128.wast
$WAST2JSON_CMD $TESTSUITE_DIR/binary.wast
$WAST2JSON_CMD $TESTSUITE_DIR/block.wast
$WAST2JSON_CMD $TESTSUITE_DIR/br_if.wast
$WAST2JSON_CMD $TESTSUITE_DIR/br_table.wast
$WAST2JSON_CMD $TESTSUITE_DIR/br.wast
$WAST2JSON_CMD $TESTSUITE_DIR/bulk.wast
$WAST2JSON_CMD $TESTSUITE_DIR/call_indirect.wast
$WAST2JSON_CMD $TESTSUITE_DIR/call.wast
$WAST2JSON_CMD $TESTSUITE_DIR/comments.wast
$WAST2JSON_CMD $TESTSUITE_DIR/const.wast
$WAST2JSON_CMD $TESTSUITE_DIR/conversions.wast
$WAST2JSON_CMD $TESTSUITE_DIR/custom.wast
$WAST2JSON_CMD $TESTSUITE_DIR/data.wast
$WAST2JSON_CMD $TESTSUITE_DIR/elem.wast
$WAST2JSON_CMD $TESTSUITE_DIR/endianness.wast
$WAST2JSON_CMD $TESTSUITE_DIR/exports.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f32_bitwise.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f32_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f32.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f64_bitwise.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f64_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/f64.wast
$WAST2JSON_CMD $TESTSUITE_DIR/fac.wast
$WAST2JSON_CMD $TESTSUITE_DIR/float_exprs.wast
$WAST2JSON_CMD $TESTSUITE_DIR/float_literals.wast
$WAST2JSON_CMD $TESTSUITE_DIR/float_memory.wast
$WAST2JSON_CMD $TESTSUITE_DIR/float_misc.wast
$WAST2JSON_CMD $TESTSUITE_DIR/forward.wast
$WAST2JSON_CMD $TESTSUITE_DIR/func_ptrs.wast
$WAST2JSON_CMD $TESTSUITE_DIR/func.wast
$WAST2JSON_CMD $TESTSUITE_DIR/global.wast
$WAST2JSON_CMD $TESTSUITE_DIR/i32.wast
$WAST2JSON_CMD $TESTSUITE_DIR/i64.wast
$WAST2JSON_CMD $TESTSUITE_DIR/if.wast
$WAST2JSON_CMD $TESTSUITE_DIR/imports.wast
$WAST2JSON_CMD $TESTSUITE_DIR/inline-module.wast
$WAST2JSON_CMD $TESTSUITE_DIR/int_exprs.wast
$WAST2JSON_CMD $TESTSUITE_DIR/int_literals.wast
$WAST2JSON_CMD $TESTSUITE_DIR/labels.wast
$WAST2JSON_CMD $TESTSUITE_DIR/left-to-right.wast
$WAST2JSON_CMD $TESTSUITE_DIR/linking.wast
$WAST2JSON_CMD $TESTSUITE_DIR/load.wast
$WAST2JSON_CMD $TESTSUITE_DIR/local_get.wast
$WAST2JSON_CMD $TESTSUITE_DIR/local_set.wast
$WAST2JSON_CMD $TESTSUITE_DIR/local_tee.wast
$WAST2JSON_CMD $TESTSUITE_DIR/loop.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_copy.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_fill.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_grow.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_init.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_redundancy.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_size.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory_trap.wast
$WAST2JSON_CMD $TESTSUITE_DIR/memory.wast
$WAST2JSON_CMD $TESTSUITE_DIR/names.wast
$WAST2JSON_CMD $TESTSUITE_DIR/nop.wast
$WAST2JSON_CMD $TESTSUITE_DIR/ref_func.wast
$WAST2JSON_CMD $TESTSUITE_DIR/ref_is_null.wast
$WAST2JSON_CMD $TESTSUITE_DIR/ref_null.wast
$WAST2JSON_CMD $TESTSUITE_DIR/return.wast
$WAST2JSON_CMD $TESTSUITE_DIR/select.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_address.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_align.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_bit_shift.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_bitwise.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_boolean.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_const.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_conversions.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f32x4_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f32x4_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f32x4_pmin_pmax.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f32x4_rounding.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f32x4.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f64x2_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f64x2_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f64x2_pmin_pmax.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f64x2_rounding.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_f64x2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i8x16_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i8x16_arith2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i8x16_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i8x16_sat_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_arith2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_extadd_pairwise_i8x16.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_extmul_i8x16.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_q15mulr_sat_s.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i16x8_sat_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_arith2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_dot_i16x8.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_extadd_pairwise_i16x8.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_extmul_i16x8.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_trunc_sat_f32x4.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i32x4_trunc_sat_f64x2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i64x2_arith.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i64x2_arith2.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i64x2_cmp.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_i64x2_extmul_i32x4.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_int_to_int_extend.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load_extend.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load_splat.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load_zero.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load8_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load16_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load32_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_load64_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_splat.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_store.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_store8_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_store16_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_store32_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/simd_store64_lane.wast
$WAST2JSON_CMD $TESTSUITE_DIR/skip-stack-guard-page.wast
$WAST2JSON_CMD $TESTSUITE_DIR/stack.wast
$WAST2JSON_CMD $TESTSUITE_DIR/start.wast
$WAST2JSON_CMD $TESTSUITE_DIR/store.wast
$WAST2JSON_CMD $TESTSUITE_DIR/switch.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_copy.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_fill.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_get.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_grow.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_init.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_set.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table_size.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table-sub.wast
$WAST2JSON_CMD $TESTSUITE_DIR/table.wast
$WAST2JSON_CMD $TESTSUITE_DIR/token.wast
$WAST2JSON_CMD $TESTSUITE_DIR/traps.wast
$WAST2JSON_CMD $TESTSUITE_DIR/type.wast
$WAST2JSON_CMD $TESTSUITE_DIR/unreachable.wast
$WAST2JSON_CMD $TESTSUITE_DIR/unreached-invalid.wast
$WAST2JSON_CMD $TESTSUITE_DIR/unreached-valid.wast
$WAST2JSON_CMD $TESTSUITE_DIR/unwind.wast
$WAST2JSON_CMD $TESTSUITE_DIR/utf8-custom-section-id.wast
$WAST2JSON_CMD $TESTSUITE_DIR/utf8-import-field.wast
$WAST2JSON_CMD $TESTSUITE_DIR/utf8-import-module.wast
$WAST2JSON_CMD $TESTSUITE_DIR/utf8-invalid-encoding.wast

popd